## 1.React生命周期

![img](https://i.loli.net/2021/06/22/5CSxnfG3VRQ71gD.png)

1.挂载阶段

constructor getDerviedStateFromProps render componentDidMount

2.更新阶段

getDerviedStateFromProps shouldcomponentupdate render getSnapshotBeforeUpdate componentDidupdate 

3.卸载

componentWillunmount

React 16 中删除了如下三个生命周期。

- componentWillMount
- componentWillReceiveProps
- componentWillUpdate

取代这三个生命周期的是两个新生命周期

- static **getDerivedStateFromProp**s(nextProps,nextState)
  - 在 React 16.3.0 版本中：在组件实例化、接收到新的 props 时会被调用
  - 在 React 16.4.0 版本中：在组件实例化、接收到新的 props 、组件状态更新时会被调用

该方法可以返回一个对象，将会和 state 发生合并，且不会触发 re-render。
这个生命周期主要为我们提供了一个可以在组件实例化或 props、state **发生变化后**根据 props **修改 state** 的一个时机，用来替代旧的生命周期中的 componentWillMount、ComponentWillReceiveProps。因为是一个静态方法，this 指向不是组件实例。

- **getSnapshotBeforeUpdate**（prevProps,prevState）
  在 render 函数调用之后，**实际的 Dom 渲染之前**，在这个阶段我们可以拿到**上一个状态 Dom 元素**的坐标、大小的等相关信息。用于替代旧的生命周期中的 componentWillUpdate。
  该函数的返回值将会作为 componentDidUpdate 的第三个参数出现。